# Приложение Event Journal

Цель: Запись и отслеживание событий, связанных с системой и деятельностью пользователей.

Основной функционал:

- Запись всех значимых событий, таких как входы в систему, обновления базы данных и ошибки.
- Фильтрация и поиск событий по различным критериям.
- Просмотр подробных сведений о каждом событии, включая дату, источник и сообщение.
- Настройка уведомлений для критических событий.

## Бизнес требования

### Логирование записей

Логирование записей об обновлении базы данных можно сделать с помощью следующих методов:

- Использование фреймворка регистрации: Такие фреймворки, как Serilog или NLog, предоставляют простой и эффективный способ регистрации событий и сообщений, включая события обновления базы данных.
- Использование встроенных возможностей .NET: Класс `System.Diagnostics.EventLog` предоставляет базовые возможности для регистрации событий в системе Windows.
- Использование хранимых процедур или триггеров базы данных: Хранимые процедуры или триггеры можно использовать для автоматической регистрации событий обновления базы данных в настраиваемой таблице журнала.

### Логирование записей об обновлении базы данных

Обновление базы данных - это процесс модификации или изменения существующих данных в базе данных. Эта модификация обычно включает изменение значений одного или нескольких полей в записи или строке.

Соответственно, в приложении можно настроить то, изменения в каких таблицах и столбцах должны логироваться более тщательно.

### Фильтрация и поиск событий по различным критериям

#### C#

Для фильтрации и поиска событий по различным критериям из C# кода можно использовать следующие инструменты:

- LINQ to Objects: LINQ to Objects предоставляет набор методов расширения для фильтрации и поиска коллекций объектов, таких как список зарегистрированных событий.
- Библиотека `System.Linq.Expressions`: Библиотека `System.Linq.Expressions` предоставляет более мощные возможности для построения сложных запросов фильтрации и поиска.
- Сторонние библиотеки: Существуют различные сторонние библиотеки, такие как `PredicateBuilder`, которые могут упростить создание сложных фильтров для коллекций объектов.

#### UI/UX

С точки зрения UI/UX фильтрация и поиск событий по различным критериям могут быть реализованы следующим образом:

- Использование фильтров: Пользователям можно предоставить возможность выбора из предварительно определенного набора фильтров, таких как "Все события", "Критические события" или "События за последние 24 часа".
- Использование расширенного поиска: Для более гибкой фильтрации и поиска можно предоставить пользователям возможность вводить собственные критерии поиска, такие как текстовые строки, диапазоны дат или значения полей.
- Использование табличного представления: Результаты фильтрации и поиска можно представить в табличном виде, позволяя пользователям сортировать и фильтровать данные по различным столбцам.

### Настройка уведомлений для критических событий

Функционал настройки уведомлений для критических событий в приложении Event Journal может перекликаться с приложением Notifications. Однако есть несколько причин, по которым может быть целесообразно сохранить этот функционал в приложении Event Journal:

- Контекстная информация: Уведомления, создаваемые в приложении Event Journal, могут содержать контекстную информацию, специфичную для конкретного события. Это может быть полезно для быстрого реагирования на критические события.
- Интеграция с регистрацией событий: Настройка уведомлений для критических событий в приложении Event Journal может быть тесно интегрирована с функционалом регистрации событий. Это может упростить создание и управление уведомлениями.
- Разделение ответственности: Разделение функционала настройки уведомлений между двумя приложениями может улучшить разделение ответственности и сделать код более модульным.

В конечном итоге решение о том, дублировать ли функционал настройки уведомлений в приложении Notifications, зависит от конкретных требований и архитектуры приложения.

## Архитектура

### Модули

- Регистрация событий.
- Фильтрация и поиск событий.
- Просмотр журналов событий.
- Уведомления о событиях.

### Классы 

Классы, входящие в приложение Event Journal:

- `Event`: Представляет отдельное событие, включая дату, источник, тип, сообщение и другую релевантную информацию.
- `EventFilter`: Позволяет фильтровать события по различным критериям, таким как тип события, источник, диапазон дат и т. д.
- `EventSearch`: Позволяет искать события по текстовым строкам, значениям полей или другим критериям.
- `EventLog`: Хранит коллекцию всех записанных событий.
- `EventViewer`: Предоставляет интерфейс для просмотра подробных сведений о каждом событии, включая исходное сообщение, стек вызовов и другую релевантную информацию.
- `EventNotifier`: Отправляет уведомления о критических событиях через различные каналы, такие как электронная почта, SMS или внутренние системы оповещения.
